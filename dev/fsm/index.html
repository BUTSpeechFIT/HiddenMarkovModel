<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Finite State Machines · MarkovModels</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">MarkovModels</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Manual</span><ul><li class="is-active"><a class="tocitem" href>Finite State Machines</a><ul class="internal"><li><a class="tocitem" href="#Creating-FSMs"><span>Creating FSMs</span></a></li><li><a class="tocitem" href="#States"><span>States</span></a></li><li><a class="tocitem" href="#Links"><span>Links</span></a></li><li><a class="tocitem" href="#Iterating-over-states-and-links"><span>Iterating over states and links</span></a></li><li><a class="tocitem" href="#FSM-operations"><span>FSM operations</span></a></li></ul></li><li><a class="tocitem" href="../inference/">Inference</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Manual</a></li><li class="is-active"><a href>Finite State Machines</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Finite State Machines</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/BUTSpeechFIT/MarkovModels/blob/master/docs/src/fsm.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Finite-State-Machines"><a class="docs-heading-anchor" href="#Finite-State-Machines">Finite State Machines</a><a id="Finite-State-Machines-1"></a><a class="docs-heading-anchor-permalink" href="#Finite-State-Machines" title="Permalink"></a></h1><p>The MarkovModels package represents Markov chains as probabilistic a Finite State Machine (FSM).  Here is an example of FSM as used by the package:</p><p><img src="../images/examplefsm.svg" alt/></p><p>The double edge circle node with the label &quot;&lt;s&gt;&quot; (respectively &quot;&lt;/s&gt;&quot;) is the initial (respectively final) state of the FSM. States with light blue background color are <em>emitting states</em>, that is, they are associated with a probability density function index (<code>pdfindex</code>). If they have no label, this index is use when displaying the node - as in the example above. White circle node with a label written inside are <em>non-emitting labeled states</em>. The states represented as point are neither emitting nor have a label. Finally, the number on the links are the log-probabilities to move from one state to another.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>To be able to visualize FSMs as in the example above when using <a href="https://github.com/JuliaLang/IJulia.jl">IJulia</a>, make sure that the <code>dot</code> program (from <a href="https://graphviz.org/">graphviz</a>) is available in your shell <code>PATH</code> variable. Also, you won&#39;t be able to visualize the FSM in the REPL.</p></div></div><p>In the following, we present the tools provided by the package manipulate such FSM. All the examples below assume that you have already imported the MarkovModels package by doing <code>using MarkovModels</code>.</p><h2 id="Creating-FSMs"><a class="docs-heading-anchor" href="#Creating-FSMs">Creating FSMs</a><a id="Creating-FSMs-1"></a><a class="docs-heading-anchor-permalink" href="#Creating-FSMs" title="Permalink"></a></h2><p>FSMs are represented by the following structure:</p><article class="docstring"><header><a class="docstring-binding" id="MarkovModels.FSM" href="#MarkovModels.FSM"><code>MarkovModels.FSM</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">struct FSM{T}
    ...
end</code></pre><p>Structure of a FSM. The type <code>T</code> indicates the type of the arcs&#39; weight.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BUTSpeechFIT/MarkovModels/blob/62b6f2accc0ddd4e548e7b2f7d218f9f5633e426/src/fsm.jl#L45-L52">source</a></section></article><p>To create an FSM object simply type:</p><pre><code class="language-julia">fsm = FSM{Float64}()</code></pre><p><img src="../images/initfsm.svg" alt="alternative text"/></p><p>When created, the FSM has only two states: the initial state and the final state. FSMs cannot have multiple initial for final states.</p><p>You can add states to the FSM by using the function <code>addstate!</code>:</p><pre><code class="language-julia">s1 = addstate!(fsm, pdfindex = 1)
s2 = addstate!(fsm, pdfindex = 2, label = &quot;a&quot;)
s3 = addstate!(fsm, label = &quot;b&quot;)
s4 = addstate!(fsm)</code></pre><p><img src="../images/addstate.svg" alt="alternative text"/></p><p>Note that a state can be:</p><ul><li>emitting and labeled</li><li>emitting only</li><li>labeled only</li><li>non-emitting and non-labeled (nil state)</li></ul><p>The initial and final states are specific nil states.</p><p>The <code>link!</code> allows to add weighted arcs between states:</p><pre><code class="language-julia">link!(initstate(fsm), s1)
link!( s1, s1, log(1/2))
link!(s1, s2, log(1/2))
link!(s2, s3)
link!(s3, s4)
link!(s4, finalstate(fsm))</code></pre><p><img src="../images/links.svg" alt="alternative text"/></p><p>Finally, we provide a special constructor for convenience:</p><article class="docstring"><header><a class="docstring-binding" id="MarkovModels.LinearFSM" href="#MarkovModels.LinearFSM"><code>MarkovModels.LinearFSM</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">LinearFSM([T, ]seq[, emissionsmap::Dict{&lt;:Label, &lt;:PdfIndex}])</code></pre><p>Create a linear FSM of type <code>T</code> from a sequence of labels <code>seq</code>. If <code>emissionsmap</code> is provided, every item <code>l</code> of <code>seq</code> with a matching entry in <code>emissionsmap</code> will be assigned the pdf index <code>emissionsmap[l]</code>. <code>PdfIndex</code> can be any integer type and <code>Label</code> any string type.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BUTSpeechFIT/MarkovModels/blob/62b6f2accc0ddd4e548e7b2f7d218f9f5633e426/src/fsm.jl#L94-L101">source</a></section></article><p>For instance,</p><pre><code class="language-julia">fsm = LinearFSM(Float32, [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;], Dict(&quot;a&quot; =&gt; 1, &quot;b&quot; =&gt; 2, &quot;c&quot; =&gt; 3))</code></pre><p><img src="../images/linearfsm.svg" alt/></p><h2 id="States"><a class="docs-heading-anchor" href="#States">States</a><a id="States-1"></a><a class="docs-heading-anchor-permalink" href="#States" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="MarkovModels.State" href="#MarkovModels.State"><code>MarkovModels.State</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">struct State
    id
    pdfindex
    label
end</code></pre><p>State of a FSM.</p><ul><li><code>id</code> is the unique identifier of the state within a FSM.</li><li><code>pdfindex</code> is the index of a probability density associated to the  state. If the state is non-emitting, <code>pdfindex</code> is equal to  <code>nothing</code>.</li><li><code>label</code> is a readable name (either <code>String</code> or <code>Nothing</code>).</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; State(1)
State(1)
julia&gt; State(1, pdfindex = 2)
State(1, pdfindex = 2)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BUTSpeechFIT/MarkovModels/blob/62b6f2accc0ddd4e548e7b2f7d218f9f5633e426/src/state.jl#L131-L151">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="MarkovModels.isemitting" href="#MarkovModels.isemitting"><code>MarkovModels.isemitting</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">isemitting(state)</code></pre><p>Returns <code>true</code> if <code>state</code> a pdf index associated.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BUTSpeechFIT/MarkovModels/blob/62b6f2accc0ddd4e548e7b2f7d218f9f5633e426/src/state.jl#L12-L16">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="MarkovModels.isinit" href="#MarkovModels.isinit"><code>MarkovModels.isinit</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">isinit(state)</code></pre><p>Returns <code>true</code> if the <code>state</code> is the initial state of the FSM.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BUTSpeechFIT/MarkovModels/blob/62b6f2accc0ddd4e548e7b2f7d218f9f5633e426/src/state.jl#L19-L23">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="MarkovModels.isfinal" href="#MarkovModels.isfinal"><code>MarkovModels.isfinal</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">isfinal(state)</code></pre><p>Returns <code>true</code> if the <code>state</code> is the final state of the FSM.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BUTSpeechFIT/MarkovModels/blob/62b6f2accc0ddd4e548e7b2f7d218f9f5633e426/src/state.jl#L26-L30">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="MarkovModels.islabeled" href="#MarkovModels.islabeled"><code>MarkovModels.islabeled</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">islabeled(state)</code></pre><p>Returns <code>true</code> if the <code>state</code> has a label.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BUTSpeechFIT/MarkovModels/blob/62b6f2accc0ddd4e548e7b2f7d218f9f5633e426/src/state.jl#L33-L37">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="MarkovModels.links-Tuple{MarkovModels.AbstractState}" href="#MarkovModels.links-Tuple{MarkovModels.AbstractState}"><code>MarkovModels.links</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">links(state)</code></pre><p>Iterator over the links to the children (i.e. next states) of <code>state</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BUTSpeechFIT/MarkovModels/blob/62b6f2accc0ddd4e548e7b2f7d218f9f5633e426/src/state.jl#L40-L44">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="MarkovModels.nextemittingstates" href="#MarkovModels.nextemittingstates"><code>MarkovModels.nextemittingstates</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">nextemittingstates(fsm, state)</code></pre><p>Iterator over the next emitting states. For each value, the iterator return a tuple <code>(nextstate, weightpath, path)</code>. The weight path is the sum of the weights for all the link to reach <code>nextstate</code>. Path is a vector of links between <code>state</code> and <code>nextstate</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BUTSpeechFIT/MarkovModels/blob/62b6f2accc0ddd4e548e7b2f7d218f9f5633e426/src/state.jl#L47-L54">source</a></section></article><h2 id="Links"><a class="docs-heading-anchor" href="#Links">Links</a><a id="Links-1"></a><a class="docs-heading-anchor-permalink" href="#Links" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="MarkovModels.Link" href="#MarkovModels.Link"><code>MarkovModels.Link</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia">struct Link{T}
    src::T where T&lt;:AbstractState
    dest::D where T&lt;:AbstractState
    weight::T
end</code></pre><p>Weighted link pointing from a state <code>src</code> to a state <code>dest</code> with weight <code>weight</code>.  <code>T</code> is the type of the weight value. The weight represents the log-probability of going through this link.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BUTSpeechFIT/MarkovModels/blob/62b6f2accc0ddd4e548e7b2f7d218f9f5633e426/src/link.jl#L8-L18">source</a></section></article><h2 id="Iterating-over-states-and-links"><a class="docs-heading-anchor" href="#Iterating-over-states-and-links">Iterating over states and links</a><a id="Iterating-over-states-and-links-1"></a><a class="docs-heading-anchor-permalink" href="#Iterating-over-states-and-links" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="MarkovModels.initstate" href="#MarkovModels.initstate"><code>MarkovModels.initstate</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">initstate(fsm)</code></pre><p>Returns the initial state of <code>fsm</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BUTSpeechFIT/MarkovModels/blob/62b6f2accc0ddd4e548e7b2f7d218f9f5633e426/src/fsm.jl#L10-L14">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="MarkovModels.finalstate" href="#MarkovModels.finalstate"><code>MarkovModels.finalstate</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">finalstate(fsm)</code></pre><p>Returns the final state of <code>fsm</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BUTSpeechFIT/MarkovModels/blob/62b6f2accc0ddd4e548e7b2f7d218f9f5633e426/src/fsm.jl#L17-L21">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="MarkovModels.links" href="#MarkovModels.links"><code>MarkovModels.links</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">links(state)</code></pre><p>Iterator over the links to the children (i.e. next states) of <code>state</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BUTSpeechFIT/MarkovModels/blob/62b6f2accc0ddd4e548e7b2f7d218f9f5633e426/src/state.jl#L40-L44">source</a></section><section><div><pre><code class="language-none">links(fsm)</code></pre><p>Returns the list of the links of the FSM.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BUTSpeechFIT/MarkovModels/blob/62b6f2accc0ddd4e548e7b2f7d218f9f5633e426/src/fsm.jl#L31-L35">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="MarkovModels.states" href="#MarkovModels.states"><code>MarkovModels.states</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">states(fsm)</code></pre><p>Iterator over the state of <code>fsm</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BUTSpeechFIT/MarkovModels/blob/62b6f2accc0ddd4e548e7b2f7d218f9f5633e426/src/fsm.jl#L24-L28">source</a></section></article><h2 id="FSM-operations"><a class="docs-heading-anchor" href="#FSM-operations">FSM operations</a><a id="FSM-operations-1"></a><a class="docs-heading-anchor-permalink" href="#FSM-operations" title="Permalink"></a></h2><h3 id="Composition"><a class="docs-heading-anchor" href="#Composition">Composition</a><a id="Composition-1"></a><a class="docs-heading-anchor-permalink" href="#Composition" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="MarkovModels.compose" href="#MarkovModels.compose"><code>MarkovModels.compose</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">compose(subfsms::Dict, fsm)
Base.:∘(subfsms::Dict, fsm)</code></pre><p>Replace each state <code>s</code> in <code>fsm</code> by a &quot;subfsms&quot; from <code>subfsms</code> with associated label <code>s.label</code>. <code>subfsms</code> should be a Dict{&lt;:Label, FSM}`.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BUTSpeechFIT/MarkovModels/blob/62b6f2accc0ddd4e548e7b2f7d218f9f5633e426/src/fsmop.jl#L291-L297">source</a></section></article><h4 id="Example"><a class="docs-heading-anchor" href="#Example">Example</a><a id="Example-1"></a><a class="docs-heading-anchor-permalink" href="#Example" title="Permalink"></a></h4><pre><code class="language-julia">fsm = union(LinearFSM([&quot;a&quot;, &quot;b&quot;]), LinearFSM([&quot;c&quot;])) |&gt; weightnormalize
subfsms = subfsms = Dict(
    &quot;a&quot; =&gt; LinearFSM([&quot;a1&quot;, &quot;a2&quot;, &quot;a3&quot;], Dict(&quot;a1&quot;=&gt;1, &quot;a2&quot;=&gt;2, &quot;a3&quot;=&gt;3)),
    &quot;b&quot; =&gt; LinearFSM([&quot;b1&quot;, &quot;b2&quot;], Dict(&quot;b1&quot;=&gt;4, &quot;b2&quot;=&gt;5)),
    &quot;c&quot; =&gt; LinearFSM([&quot;c1&quot;, &quot;c2&quot;], Dict(&quot;c1&quot;=&gt;6, &quot;c2&quot;=&gt;1))
)
compose(subfsms, fsm)</code></pre><p>Input :</p><ul><li><code>fsm</code></li></ul><p><img src="../images/compose_input1.svg" alt/></p><ul><li><code>subfsms[&quot;a&quot;]</code></li></ul><p><img src="../images/compose_input2.svg" alt/></p><ul><li><code>subfsms[&quot;b&quot;]</code></li></ul><p><img src="../images/compose_input3.svg" alt/></p><ul><li><code>subfsms[&quot;c&quot;]</code></li></ul><p><img src="../images/compose_input4.svg" alt/> Output:   <img src="../images/compose_output.svg" alt/></p><p>Alternatively, FSMs can be composed with the <code>∘</code> operator:</p><pre><code class="language-julia">fsm ∘ sufsms</code></pre><h3 id="Concatenation"><a class="docs-heading-anchor" href="#Concatenation">Concatenation</a><a id="Concatenation-1"></a><a class="docs-heading-anchor-permalink" href="#Concatenation" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="MarkovModels.concat" href="#MarkovModels.concat"><code>MarkovModels.concat</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">concat(fsm1, fsm2, ...)</code></pre><p>Concatenate several FSMs into single FSM.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BUTSpeechFIT/MarkovModels/blob/62b6f2accc0ddd4e548e7b2f7d218f9f5633e426/src/fsmop.jl#L61-L65">source</a></section></article><h4 id="Example-2"><a class="docs-heading-anchor" href="#Example-2">Example</a><a class="docs-heading-anchor-permalink" href="#Example-2" title="Permalink"></a></h4><pre><code class="language-julia">fsm1 = LinearFSM([&quot;a&quot;, &quot;b&quot;])
fsm2 = LinearFSM([&quot;c&quot;, &quot;d&quot;])
fsm3 = LinearFSM([&quot;e&quot;])
concat(fsm1, fsm2, fsm3)</code></pre><p>Input:</p><ul><li><code>fsm1</code></li></ul><p><img src="../images/concat_input1.svg" alt/></p><ul><li><code>fsm2</code></li></ul><p><img src="../images/concat_input2.svg" alt/></p><ul><li><code>fsm3</code></li></ul><p><img src="../images/concat_input3.svg" alt/></p><p>Output:   <img src="../images/concat_output.svg" alt/></p><h3 id="Determinization"><a class="docs-heading-anchor" href="#Determinization">Determinization</a><a id="Determinization-1"></a><a class="docs-heading-anchor-permalink" href="#Determinization" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="MarkovModels.determinize" href="#MarkovModels.determinize"><code>MarkovModels.determinize</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">determinize(fsm)</code></pre><p>Transform <code>fsm</code> such that each state has at most one link to any other states.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BUTSpeechFIT/MarkovModels/blob/62b6f2accc0ddd4e548e7b2f7d218f9f5633e426/src/fsmop.jl#L121-L126">source</a></section></article><h3 id="Example-3"><a class="docs-heading-anchor" href="#Example-3">Example</a><a class="docs-heading-anchor-permalink" href="#Example-3" title="Permalink"></a></h3><pre><code class="language-julia">fsm = FSM{Float64}()
s1 = addstate!(fsm, label = &quot;a&quot;)
s2 = addstate!(fsm, label = &quot;b&quot;, pdfindex = 1)
link!(s1, s2, log(1/2))
link!(s1, s2, log(1/2))
link!(initstate(fsm), s1)
link!(s2, finalstate(fsm))
fsm |&gt; determinize</code></pre><p>Input: <img src="../images/determinize_input.svg" alt/></p><p>Output: <img src="../images/determinize_output.svg" alt/></p><h3 id="Minimization"><a class="docs-heading-anchor" href="#Minimization">Minimization</a><a id="Minimization-1"></a><a class="docs-heading-anchor-permalink" href="#Minimization" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="MarkovModels.minimize" href="#MarkovModels.minimize"><code>MarkovModels.minimize</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">minimize(fsm)</code></pre><p>Merge equivalent states to reduce the size of the FSM. Only the states that have the same <code>pdfindex</code> and the same <code>label</code> can be potentially merged.</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>The input FSM should not contain cycles otherwise the algorithm will never end.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BUTSpeechFIT/MarkovModels/blob/62b6f2accc0ddd4e548e7b2f7d218f9f5633e426/src/fsmop.jl#L234-L244">source</a></section></article><h4 id="Example-4"><a class="docs-heading-anchor" href="#Example-4">Example</a><a class="docs-heading-anchor-permalink" href="#Example-4" title="Permalink"></a></h4><pre><code class="language-none">fsm = union(LinearFSM([&quot;a&quot;, &quot;b&quot;, &quot;c&quot;], Dict(&quot;a&quot;=&gt;1)), LinearFSM([&quot;a&quot;, &quot;d&quot;, &quot;c&quot;], Dict(&quot;a&quot;=&gt;1)))
fsm |&gt; minimize</code></pre><p>Input:</p><p><img src="../images/minimize_input.svg" alt/></p><p>Output:</p><p><img src="../images/minimize_output.svg" alt/></p><h3 id="Nil-states-removal"><a class="docs-heading-anchor" href="#Nil-states-removal">Nil states removal</a><a id="Nil-states-removal-1"></a><a class="docs-heading-anchor-permalink" href="#Nil-states-removal" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="MarkovModels.removenilstates" href="#MarkovModels.removenilstates"><code>MarkovModels.removenilstates</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">removenilstates(fsm)</code></pre><p>Remove all states that are non-emitting and have no labels (except the the initial and final states)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BUTSpeechFIT/MarkovModels/blob/62b6f2accc0ddd4e548e7b2f7d218f9f5633e426/src/fsmop.jl#L250-L255">source</a></section></article><h4 id="Example-5"><a class="docs-heading-anchor" href="#Example-5">Example</a><a class="docs-heading-anchor-permalink" href="#Example-5" title="Permalink"></a></h4><pre><code class="language-julia">fsm = LinearFSM([&quot;a&quot;, &quot;b&quot;], Dict(&quot;a&quot; =&gt; 1))
nil = addstate!(fsm)
link!(initstate(fsm), nil)
link!(nil, finalstate(fsm))
fsm = fsm |&gt; weightnormalize
fsm |&gt; removenilstates</code></pre><p>Input:</p><p><img src="../images/rmnil_input.svg" alt/></p><p>Ouput:</p><p><img src="../images/rmnil_output.svg" alt/></p><h3 id="Transposition"><a class="docs-heading-anchor" href="#Transposition">Transposition</a><a id="Transposition-1"></a><a class="docs-heading-anchor-permalink" href="#Transposition" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Base.transpose-Union{Tuple{MarkovModels.AbstractFSM{T}}, Tuple{T}} where T" href="#Base.transpose-Union{Tuple{MarkovModels.AbstractFSM{T}}, Tuple{T}} where T"><code>Base.transpose</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">transpose(fsm)</code></pre><p>Transpose the fsm, i.e. reverse all it&#39;s arcs. The final state becomes the initial state.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BUTSpeechFIT/MarkovModels/blob/62b6f2accc0ddd4e548e7b2f7d218f9f5633e426/src/fsmop.jl#L6-L11">source</a></section></article><h4 id="Example-6"><a class="docs-heading-anchor" href="#Example-6">Example</a><a class="docs-heading-anchor-permalink" href="#Example-6" title="Permalink"></a></h4><pre><code class="language-julia">fsm = LinearFSM([&quot;a&quot;, &quot;b&quot;, &quot;c&quot;])
transpose(fsm)</code></pre><p>Input:</p><p><img src="../images/transpose_input.svg" alt/></p><p>Output:</p><p><img src="../images/transpose_output.svg" alt/></p><h3 id="Union"><a class="docs-heading-anchor" href="#Union">Union</a><a id="Union-1"></a><a class="docs-heading-anchor-permalink" href="#Union" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="Base.union-Union{Tuple{T}, Tuple{MarkovModels.AbstractFSM{T},MarkovModels.AbstractFSM{T}}} where T" href="#Base.union-Union{Tuple{T}, Tuple{MarkovModels.AbstractFSM{T},MarkovModels.AbstractFSM{T}}} where T"><code>Base.union</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia">union(fsm1, fsm2, ...)
∪(fsm1, fsm2, ...)</code></pre><p>Merge several FSMs into a single one.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BUTSpeechFIT/MarkovModels/blob/62b6f2accc0ddd4e548e7b2f7d218f9f5633e426/src/fsmop.jl#L29-L34">source</a></section></article><h4 id="Example-7"><a class="docs-heading-anchor" href="#Example-7">Example</a><a class="docs-heading-anchor-permalink" href="#Example-7" title="Permalink"></a></h4><pre><code class="language-julia">fsm1 = LinearFSM([&quot;a&quot;, &quot;b&quot;, &quot;c&quot;], Dict(&quot;a&quot;=&gt;1))
fsm2 = LinearFSM([&quot;a&quot;, &quot;d&quot;, &quot;c&quot;], Dict(&quot;a&quot;=&gt;1))
union(fsm1, fsm2)</code></pre><p>Input:</p><ul><li><p><code>fsm1</code></p><p><img src="../images/union_input1.svg" alt="See the online documentation to visualize the image"/></p></li><li><p><code>fsm2</code></p><p><img src="../images/union_input2.svg" alt="See the online documentation to visualize the image"/></p></li></ul><p>Output:</p><p><img src="../images/union_output.svg" alt/></p><h3 id="Weights-normalization"><a class="docs-heading-anchor" href="#Weights-normalization">Weights normalization</a><a id="Weights-normalization-1"></a><a class="docs-heading-anchor-permalink" href="#Weights-normalization" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-binding" id="MarkovModels.weightnormalize" href="#MarkovModels.weightnormalize"><code>MarkovModels.weightnormalize</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">weightnormalize(fsm)</code></pre><p>Change the weight of the links such that the sum of the exponentiated weights of the outgoing links from one state will sum up to one.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/BUTSpeechFIT/MarkovModels/blob/62b6f2accc0ddd4e548e7b2f7d218f9f5633e426/src/fsmop.jl#L91-L96">source</a></section></article><h4 id="Example-8"><a class="docs-heading-anchor" href="#Example-8">Example</a><a class="docs-heading-anchor-permalink" href="#Example-8" title="Permalink"></a></h4><pre><code class="language-julia">fsm = union(LinearFSM([&quot;a&quot;, &quot;b&quot;]), LinearFSM([&quot;c&quot;, &quot;d&quot;]))
for s in states(fsm)
    if ! isinit(s) &amp;&amp; ! isfinal(s)
        link!(s, s)
    end
end
fsm |&gt; weightnormalize</code></pre><p>Input:</p><p><img src="../images/wnorm_input.svg" alt/></p><p>Output:</p><p><img src="../images/wnorm_output.svg" alt/></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><a class="docs-footer-nextpage" href="../inference/">Inference »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Monday 25 January 2021 15:58">Monday 25 January 2021</span>. Using Julia version 1.4.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
